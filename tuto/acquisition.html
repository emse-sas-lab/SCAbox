
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>#3 - Use SCAbox &#8212; SCAbox</title>
  <script>
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1e1de1a1873e13ef5536" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1e1de1a1873e13ef5536" rel="stylesheet">

  
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/6.1.2/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1e1de1a1873e13ef5536">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'tuto/acquisition';</script>
    <link rel="shortcut icon" href="../_static/scabox_logo.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="#2 - Install SCAbox" href="installation.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  
  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fa-solid fa-bars"></span>
  </label>
  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../index.html">

  
  
  
  
  
  
  

  
  
    <p class="title logo__title">SCAbox</p>
  
</a>
    
  </div>

  
  <div class="col-lg-9 navbar-header-items">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                <li class="nav-item current active">
                    <a class="nav-link" href="home.html">
                        Home
                    </a>
                </li>
                
    </ul>
</nav>
      </div>
      
    </div>

    <div id="navbar-end">
      <div class="navbar-end-item navbar-end__search-button-container">
        
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
      </div>
      
      <div class="navbar-end-item">
        <span class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" data-toggle="tooltip">
    <a class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="fa-regular fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>


  
  <div class="search-button-container--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
  </div>

  
  <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
  </label>
  

</div>
  </nav>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        
  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                <li class="nav-item current active">
                    <a class="nav-link" href="home.html">
                        Home
                    </a>
                </li>
                
    </ul>
</nav>
      </div>
      
      </div>
    

    
    
    <div class="sidebar-header-items__end">
      
      <div class="navbar-end-item">
        <span class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" data-toggle="tooltip">
    <a class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="fa-regular fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
    
  </div>

  
  <div class="sidebar-start-items sidebar-primary__section">
    <div class="sidebar-start-items__item"><nav class="bd-links" id="bd-docs-nav" aria-label="Section navigation">
  <p class="bd-links__title" role="heading" aria-level="1">
    Section Navigation
  </p>
  <div class="bd-toc-item navbar-nav">
    <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="download.html">#0 - Download SCAbox</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="test.html">#1 - Run the Pre-Built Demo</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="installation.html">#2 - Install SCAbox</a></li>
</ul>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">#3 - Use SCAbox</a></li>
</ul>

  </div>
</nav>
    </div>
  </div>
  

  
  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

      </div>
      <main class="bd-main">
        
        
        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                
            </div>
            
            
            <article class="bd-article" role="main">
              
  <div class="section" id="use-scabox">
<h1>#3 - Use SCAbox<a class="headerlink" href="#use-scabox" title="Permalink to this heading">#</a></h1>
<div class="section" id="goals">
<h2>Goals<a class="headerlink" href="#goals" title="Permalink to this heading">#</a></h2>
<p>This tutorial exposes the power leakage acquisition configurations available in the demonstration. We use the project built in <a class="reference external" href="installation.html">Tuto #2</a> to conduct the acquistions.</p>
<p>This tutorial will help you in performing acquisition with a serial command:</p>
<ol class="arabic simple">
<li><p>Simple acquisition</p></li>
<li><p>Cropped acquisition</p></li>
<li><p>Crypto-algorithm acquisition</p></li>
<li><p>Iterated acquisition</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>To denote the value given to an option we will always use the letter designing the option. eg. <code class="docutils literal notranslate"><span class="pre">-s</span></code> will be <span class="math notranslate nohighlight">\(s\)</span></p></li>
<li><p>If you want to learn more about the commands available in the demo you can displayed the help by typing <code class="docutils literal notranslate"><span class="pre">man</span></code></p></li>
</ul>
</div>
</div>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Have completed the <a class="reference external" href="installation.html">Tuto #2</a></p></li>
</ul>
</div>
<div class="section" id="tutorial">
<h2>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this heading">#</a></h2>
<p>The tutorial starts here !</p>
<div class="section" id="simple-acquisition">
<h3>1. Simple acquisition<a class="headerlink" href="#simple-acquisition" title="Permalink to this heading">#</a></h3>
<p>A simple acquisition consists in acquiring the sensor state and storing it into the storage FIFO. The hardware repeats this operation until the FIFO is full.</p>
<p>The latter is then read by the C program and the acquired values are exported through UART.</p>
<ol class="arabic simple">
<li><p>To perform a simple acquisition type the following command:</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>&gt; fifo -a
</pre></div>
</div>
<p>If the command executed successfully you should have an output similar to the one below in your serial terminal:</p>
<a class="reference internal image-reference" href="../_images/testfifo.png"><img alt="FIFO output simple" class="align-center" src="../_images/testfifo.png" style="width: 400px;" /></a>
<ol class="arabic simple" start="2">
<li><p>If you want the sensor output to be printed in number instead of char code use the option verbose <code class="docutils literal notranslate"><span class="pre">-v</span></code> :</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>&gt; fifo -a -v
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This command prints all the FIFO content. The default SCAbox FIFO depth is <strong>8192</strong>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>With sensors running at <strong>200 MHz</strong>, we can monitor the leakage for a duration of <strong>40µs</strong>. You can increase the FIFO depth and reduce the sensor sampling frequency to increase the acquisition duration.</p>
</div>
</div>
<div class="section" id="cropped-acquisition">
<h3>2. Cropped acquisition<a class="headerlink" href="#cropped-acquisition" title="Permalink to this heading">#</a></h3>
<p>A cropped acquisition is a simple acquisition where the data is cropped at its start and end.
The resulting data will contain <span class="math notranslate nohighlight">\(e - s\)</span> samples excluding the e-th one.</p>
<ol class="arabic simple">
<li><p>To perform a cropped acquisition type the following command</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>&gt; fifo -a -s <span class="o">[</span>start<span class="o">]</span> -e <span class="o">[</span>end<span class="o">]</span>
</pre></div>
</div>
<p>If the command executed successfully you should have an output similar to bellow in your terminal emulator :</p>
<a class="reference internal image-reference" href="../_images/testfifocropped.png"><img alt="FIFO output cropped" class="align-center" src="../_images/testfifocropped.png" style="width: 400px;" /></a>
</div>
<div class="section" id="crypto-algorithm-acquisition">
<h3>3. Crypto-algorithm acquisition<a class="headerlink" href="#crypto-algorithm-acquisition" title="Permalink to this heading">#</a></h3>
<p>A crypto-algorithm acquisition consists in acquiring the sensor state  during a cryptographic computation and storing these values into the FIFO.
The FIFO is then read by the demo and the acquired values are sent via UART.</p>
<ol class="arabic simple">
<li><p>To acquire a simple run of crypto-algorithm for instance a simple AES encryption.</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>&gt; aes -m <span class="o">[</span>mode<span class="o">]</span> -d <span class="o">[</span>data<span class="o">]</span> -k <span class="o">[</span>key<span class="o">]</span>
</pre></div>
</div>
<p>In this demo, the <strong>mode</strong> argument can be either:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">hw</span></code> for VHDL hardware AES</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tiny</span></code> for C tiny AES</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ssl</span></code> for C OpenSSL AES</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dhuertas</span></code> for C dhuertas AES</p></li>
</ul>
<p>The <strong>data</strong> argument is the plaintext in hexadecimal.
The <strong>key</strong> argument is the secret key in hexadecimal.</p>
<ol class="arabic simple" start="2">
<li><p>For instance, type the following command:</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>&gt; aes -m hw -d 00112233445566778899aabbccddeeff -k 000102030405060708090a0b0c0d0e0f
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>If the command executed successfully you should have an output similar to bellow in your terminal emulator :</p></li>
</ol>
<a class="reference internal image-reference" href="../_images/testaes.png"><img alt="AES output" class="align-center" src="../_images/testaes.png" style="width: 400px;" /></a>
<p>Note that no sensor value is displayed but the FIFO has effectively been filled. To retrieve the acquired values, you must read the FIFO :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>&gt; fifo
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/testaesfifo.png"><img alt="AES output" class="align-center" src="../_images/testaesfifo.png" style="width: 400px;" /></a>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As you can see in the above picture, some Ascii caracters cannot be displayed properly using the PuTTY interface. However, they will be correctly saved in a log file.</p>
</div>
<ol class="arabic simple" start="4">
<li><p><strong>You can perform a cropped acquisition of crypto-algorithm:</strong></p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>&gt; aes -m <span class="o">[</span>mode<span class="o">]</span> -d <span class="o">[</span>data<span class="o">]</span> -k <span class="o">[</span>key<span class="o">]</span> -e <span class="o">[</span>end<span class="o">]</span>
</pre></div>
</div>
<p>This way the hardware will stop to fill the FIFO once <span class="math notranslate nohighlight">\(e\)</span> values are acquired.
You can similarly retrieve the acquired values :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>&gt; fifo <span class="o">[</span>-v<span class="o">]</span> -s <span class="o">[</span>start<span class="o">]</span> -e <span class="o">[</span>end<span class="o">]</span>
</pre></div>
</div>
</div>
<div class="section" id="iterated-acquisition">
<h3>4. Iterated acquisition<a class="headerlink" href="#iterated-acquisition" title="Permalink to this heading">#</a></h3>
<p>In order to perform multiple crypto-algorithms runs and capture their leakage, the demo provide a simple command that will iterate the crypto-algorithm acquisition :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>&gt; sca  -m <span class="o">[</span>mode<span class="o">]</span> -t <span class="o">[</span>iterations<span class="o">]</span> -s <span class="o">[</span>start<span class="o">]</span> -e <span class="o">[</span>end<span class="o">]</span> <span class="o">[</span>-v<span class="o">]</span>
</pre></div>
</div>
<p>This command will run cryptographic computation using random data and read the FIFO at once.
This process is repeated <span class="math notranslate nohighlight">\(t\)</span> times.</p>
<p>If the command executed correctly you should see the following output :</p>
<a class="reference internal image-reference" href="../_images/testsca.png"><img alt="SCA output" class="align-center" src="../_images/testsca.png" style="width: 400px;" /></a>
</div>
</div>
<div class="section" id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this heading">#</a></h2>
<p>In this tutorial you learned how to launch sensor’s power leakage acquisition during a cryptographic encryption.
You learned how to iterate this acquisition and how to crop the power leakage.</p>
<blockquote>
<div><p>Keep in mind that the SCA automation python tool presented in <a class="reference external" href="test.html">Tuto #1</a> provides a powerful way to capture leakage and transmit it via UART using our protocol. It allows to capture enough traces, that can be crop to diminish acquisition time, in order to perform a successful attack.</p>
</div></blockquote>
</div>
</div>


            </article>
            
            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="installation.html" title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">#2 - Install SCAbox</p>
      </div>
  </a>
</div>
            </footer>
            
          </div>
          
          
          
            <div class="bd-sidebar-secondary bd-toc">
              
<div class="toc-item">
  
<div class="tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
</div>
<nav id="bd-toc-nav" class="page-toc">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#goals">
   Goals
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#requirements">
   Requirements
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tutorial">
   Tutorial
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#simple-acquisition">
     1. Simple acquisition
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#cropped-acquisition">
     2. Cropped acquisition
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#crypto-algorithm-acquisition">
     3. Crypto-algorithm acquisition
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#iterated-acquisition">
     4. Iterated acquisition
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#conclusion">
   Conclusion
  </a>
 </li>
</ul>

</nav>
</div>

<div class="toc-item">
  
<div id="searchbox"></div>
</div>

<div class="toc-item">
  
</div>

<div class="toc-item">
  
</div>

            </div>
          
          
        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            
          </div>
        </footer>
        
      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1e1de1a1873e13ef5536"></script>

  <footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    
<p class="copyright">

    &copy; Copyright 2022, EMSE.<br>

</p>

  </div>
  
  <div class="footer-item">
    
<p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.2.3.<br>
</p>

  </div>
  
</div>
  </footer>
  </body>
</html>